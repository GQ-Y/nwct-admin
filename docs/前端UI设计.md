# 前端UI设计文档

## 1. 整体设计

### 1.1 设计原则
- **简洁明了**: 界面简洁，信息层次清晰
- **响应式设计**: 适配不同屏幕尺寸
- **易用性**: 操作直观，减少学习成本
- **一致性**: 统一的视觉风格和交互模式
- **性能优化**: 快速加载，流畅交互

### 1.2 设计风格
- **色彩方案**: 
  - 主色调: 蓝色系（科技感）
  - 辅助色: 灰色系（中性）
  - 状态色: 绿色（成功）、红色（错误）、黄色（警告）
- **字体**: 系统默认字体，支持中英文
- **布局**: 左侧导航 + 主内容区

### 1.3 技术栈
- React 18+
- TypeScript
- React Router 6.x
- Axios
- ECharts (数据可视化)

## 2. 页面结构

### 2.1 整体布局

```
┌─────────────────────────────────────────────────┐
│  Header (顶部导航栏)                             │
│  - Logo  - 设备状态  - 用户信息  - 退出          │
├──────────┬──────────────────────────────────────┤
│          │                                      │
│ Sidebar  │  Main Content (主内容区)             │
│ (侧边栏)  │                                      │
│          │                                      │
│ - 仪表盘  │  [页面内容]                          │
│ - 设备扫描 │                                      │
│ - 网络工具 │                                      │
│ - 系统管理 │                                      │
│ - MQTT日志│                                      │
│          │                                      │
└──────────┴──────────────────────────────────────┘
```

### 2.2 路由结构

```
/ (根路径)
├── /login (登录页)
├── /init (初始化向导)
└── /dashboard (主界面，需要认证)
    ├── /dashboard (仪表盘)
    ├── /devices (设备列表)
    ├── /devices/:ip (设备详情)
    ├── /tools (网络工具箱)
    │   ├── /tools/ping (Ping测试)
    │   ├── /tools/traceroute (路由追踪)
    │   ├── /tools/speedtest (网速测试)
    │   └── /tools/portscan (端口扫描)
    ├── /system (系统管理)
    │   ├── /system/info (系统信息)
    │   ├── /system/config (配置管理)
    │   └── /system/logs (系统日志)
    ├── /nps (NPS管理)
    ├── /mqtt (MQTT管理)
    └── /mqtt/logs (MQTT日志)
```

## 3. 页面详细设计

### 3.1 登录页面

#### 3.1.1 布局
- 居中卡片式布局
- 背景: 渐变或图片背景
- 卡片内容: Logo + 登录表单

#### 3.1.2 功能
- 用户名/密码输入
- 记住我选项
- 登录按钮
- 错误提示

#### 3.1.3 UI组件
- Input (用户名、密码)
- Checkbox (记住我)
- Button (登录)
- Alert (错误提示)

### 3.2 初始化向导页面

#### 3.2.1 布局
- 全屏居中布局
- 步骤指示器（顶部）
- 步骤内容区（中间）
- 操作按钮（底部：上一步、下一步、完成）

#### 3.2.2 步骤设计

**步骤1: 欢迎页面**
- 欢迎文字
- 功能介绍
- 开始按钮

**步骤2: 网络配置**
- 网络类型选择（有线/WiFi）
- WiFi配置:
  - WiFi列表（可刷新）
  - SSID选择
  - 密码输入
  - 连接测试按钮
- 网络参数配置:
  - IP获取方式（DHCP/静态）
  - 静态IP配置（IP、子网掩码、网关、DNS）

**步骤3: NPS配置**
- 服务端地址输入
- 服务端端口输入
- 验证密钥输入
- 客户端ID输入
- 连接测试按钮

**步骤4: MQTT配置**
- 服务器地址输入
- 服务器端口输入
- 用户名输入
- 密码输入
- 客户端ID输入
- TLS选项
- 连接测试按钮

**步骤5: 密码设置**
- 管理员密码输入
- 确认密码输入
- 密码强度指示

**步骤6: 完成确认**
- 配置摘要显示
- 完成提示
- 进入系统按钮

### 3.3 仪表盘页面

#### 3.3.1 布局
- 网格布局（卡片式）
- 响应式: 大屏4列，中屏2列，小屏1列

#### 3.3.2 卡片内容

**系统状态卡片**
- 设备运行时间
- CPU使用率（进度条）
- 内存使用率（进度条）
- 存储使用率（进度条）

**网络状态卡片**
- 当前网络接口
- IP地址
- 连接状态（在线/离线指示）
- 上传/下载速度

**设备统计卡片**
- 在线设备数
- 离线设备数
- 总设备数
- 设备类型分布（饼图）

**服务状态卡片**
- NPS连接状态
- MQTT连接状态
- HTTP服务状态
- 各服务状态指示

**最近活动卡片**
- 最近发现的设备
- 最近的操作日志
- 最近的错误日志

### 3.4 设备列表页面

#### 3.4.1 布局
- 顶部: 搜索栏 + 操作按钮（扫描、刷新、导出）
- 主内容: 设备表格或卡片视图

#### 3.4.2 功能
- **搜索过滤**:
  - 关键词搜索（IP、名称、MAC）
  - 状态过滤（在线/离线）
  - 类型过滤
  - 时间范围过滤
- **设备列表**:
  - 表格视图: 显示设备基本信息
  - 卡片视图: 显示设备详细信息
  - 列表项操作: 查看详情、刷新信息
- **扫描控制**:
  - 开始扫描按钮
  - 停止扫描按钮
  - 扫描进度显示
  - 扫描配置

#### 3.4.3 表格列
- 设备图标（基于类型）
- IP地址
- MAC地址
- 设备名称
- 设备类型
- 厂商
- 状态（在线/离线，带颜色标识）
- 最后发现时间
- 操作（查看详情）

#### 3.4.4 设备卡片
- 设备图标
- 设备名称
- IP地址
- MAC地址
- 设备类型和厂商
- 状态指示
- 开放端口数量
- 最后发现时间
- 快速操作按钮

### 3.5 设备详情页面

#### 3.5.1 布局
- 顶部: 设备基本信息卡片
- 标签页:
  - 基本信息
  - 开放端口
  - 网络信息
  - 历史记录

#### 3.5.2 基本信息标签
- 设备图标
- IP地址
- MAC地址
- 设备名称
- 设备类型
- 厂商信息
- 操作系统
- 状态
- 首次发现时间
- 最后发现时间

#### 3.5.3 开放端口标签
- 端口列表表格
  - 端口号
  - 协议（TCP/UDP）
  - 服务名称
  - 服务版本
  - 状态
- 端口扫描按钮

#### 3.5.4 网络信息标签
- 网络接口信息
- 路由信息
- DNS信息

#### 3.5.5 历史记录标签
- 时间线展示
- 状态变化记录
- 发现时间记录

### 3.6 网络工具箱页面

#### 3.6.1 布局
- 左侧: 工具列表（导航）
- 右侧: 工具内容区

#### 3.6.2 工具页面

**Ping测试页面**
- 目标输入框
- 参数配置（次数、超时）
- 开始测试按钮
- 结果展示:
  - 统计信息（丢包率、平均延迟等）
  - 详细结果表格
  - 延迟趋势图

**Traceroute页面**
- 目标输入框
- 参数配置（最大跳数）
- 开始测试按钮
- 结果展示:
  - 路由跳转列表
  - 可视化路由图

**网速测试页面**
- 服务器选择（下拉选择或自定义）
- 测试类型选择（上传/下载/全部）
- 开始测试按钮
- 结果展示:
  - 上传速度（大数字显示 + 进度条）
  - 下载速度（大数字显示 + 进度条）
  - 延迟显示
  - 速度趋势图

**端口扫描页面**
- 目标输入框
- 端口配置（单端口/端口范围/常用端口）
- 扫描类型（TCP/UDP/全部）
- 开始扫描按钮
- 结果展示:
  - 开放端口列表
  - 端口状态统计
  - 服务识别信息

**DNS查询页面**
- 查询目标输入框
- 查询类型选择（A、AAAA、PTR等）
- DNS服务器选择（可选）
- 查询按钮
- 结果展示:
  - DNS记录列表
  - 记录详情

### 3.7 系统管理页面

#### 3.7.1 系统信息页面
- **系统概览卡片**:
  - 设备ID
  - 固件版本
  - 运行时间
  - 启动时间
- **资源使用卡片**:
  - CPU使用率（实时图表）
  - 内存使用率（实时图表）
  - 存储使用情况（进度条）
- **网络状态卡片**:
  - 当前网络接口
  - IP配置信息
  - 网络流量统计（图表）
- **服务状态卡片**:
  - 各服务运行状态
  - 服务重启按钮

#### 3.7.2 配置管理页面
- **配置表单**:
  - 网络配置
  - NPS配置
  - MQTT配置
  - 扫描配置
- **操作按钮**:
  - 保存配置
  - 重置配置
  - 导入配置
  - 导出配置

#### 3.7.3 密码修改页面
- 当前密码输入
- 新密码输入
- 确认密码输入
- 密码强度指示
- 修改按钮

#### 3.7.4 重启页面
- 重启类型选择（软重启/硬重启）
- 重启说明
- 确认对话框
- 重启按钮

#### 3.7.5 系统日志页面
- **日志过滤器**:
  - 日志级别选择
  - 模块选择
  - 时间范围选择
  - 关键词搜索
- **日志列表**:
  - 时间戳
  - 日志级别（带颜色）
  - 模块名称
  - 日志内容
  - 详细信息（可展开）
- **操作**:
  - 刷新日志
  - 清空日志
  - 导出日志

### 3.8 NPS管理页面

#### 3.8.1 连接状态
- 连接状态指示（在线/离线）
- 服务端信息
- 连接时间
- 连接/断开按钮

#### 3.8.2 配置管理
- 服务端地址配置
- 验证密钥配置
- 客户端ID配置
- 保存按钮

#### 3.8.3 隧道列表
- 隧道列表表格
  - 隧道ID
  - 类型
  - 本地地址
  - 远程端口
  - 状态
  - 创建时间
- 添加隧道按钮
- 删除隧道按钮

### 3.9 MQTT管理页面

#### 3.9.1 连接状态
- 连接状态指示
- 服务器信息
- 连接时间
- 订阅主题列表
- 发布主题列表
- 连接/断开按钮

#### 3.9.2 配置管理
- 服务器地址配置
- 端口配置
- 用户名密码配置
- 客户端ID配置
- TLS选项
- 保存按钮

### 3.10 MQTT日志页面

#### 3.10.1 布局
- 顶部: 过滤器 + 操作按钮
- 主内容: 日志列表
- 底部: 分页

#### 3.10.2 过滤器
- 主题过滤（下拉选择或输入）
- 消息方向（发布/订阅/全部）
- 时间范围选择
- 关键词搜索

#### 3.10.3 日志列表
- 时间戳
- 方向标识（发布/订阅图标）
- 主题名称
- QoS级别
- 消息内容（JSON格式化显示）
- 状态（成功/失败）
- 展开查看详情

#### 3.10.4 实时日志
- 实时日志开关
- 自动滚动开关
- 日志高亮显示

#### 3.10.5 操作
- 刷新日志
- 清空日志
- 导出日志

## 4. 组件设计

### 4.1 公共组件

#### 4.1.1 设备状态指示器
- 在线: 绿色圆点
- 离线: 灰色圆点
- 未知: 黄色圆点

#### 4.1.2 服务状态指示器
- 运行中: 绿色
- 停止: 红色
- 连接中: 黄色

#### 4.1.3 进度指示器
- 扫描进度条
- 测试进度条
- 加载状态

#### 4.1.4 数据卡片
- 标题
- 数值显示
- 趋势图表（可选）
- 操作按钮（可选）

### 4.2 业务组件

#### 4.2.1 设备卡片组件
- 设备图标
- 设备信息
- 状态指示
- 操作按钮

#### 4.2.2 网络工具组件
- 参数输入表单
- 测试执行按钮
- 结果展示区域

#### 4.2.3 日志查看器组件
- 日志列表
- 过滤器
- 实时更新

## 5. 交互设计

### 5.1 加载状态
- 页面加载: Skeleton屏幕
- 数据加载: Loading指示器
- 操作执行: Button Loading状态

### 5.2 错误处理
- 网络错误: 错误提示 + 重试按钮
- 表单验证: 实时验证 + 错误提示
- 操作失败: Toast提示 + 错误详情

### 5.3 成功反馈
- 操作成功: Toast提示
- 数据更新: 自动刷新或提示刷新

### 5.4 确认操作
- 危险操作: 确认对话框
- 删除操作: 二次确认
- 重启操作: 警告提示

## 6. 响应式设计

### 6.1 断点设置
- 小屏: < 768px (手机)
- 中屏: 768px - 1024px (平板)
- 大屏: > 1024px (桌面)

### 6.2 适配策略
- 小屏: 单列布局，侧边栏收起
- 中屏: 双列布局，侧边栏可收起
- 大屏: 多列布局，侧边栏展开

## 7. 性能优化

### 7.1 代码优化
- 代码分割（路由级别）
- 组件懒加载
- 虚拟滚动（长列表）

### 7.2 数据优化
- 数据缓存
- 防抖节流
- 分页加载

### 7.3 资源优化
- 图片懒加载
- 资源压缩
- CDN加速（可选）

## 8. 可访问性

### 8.1 键盘导航
- 支持Tab键导航
- 支持快捷键操作

### 8.2 屏幕阅读器
- 语义化HTML
- ARIA标签
- 文本替代

### 8.3 视觉辅助
- 高对比度模式
- 字体大小调整（可选）

